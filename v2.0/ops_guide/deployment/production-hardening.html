
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-RS4T4ZPG52"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-RS4T4ZPG52');
    </script>
<meta content="Production Hardening" property="og:title"/>
<meta content="website" property="og:type"/>
<meta content="https://docs.openspp.org/ops_guide/deployment/production-hardening.html" property="og:url"/>
<meta content="OpenSPP Documentation" property="og:site_name"/>
<meta content="For: System administrators deploying OpenSPP to production This guide covers hardening a single-node Docker Compose deployment using the reference docker-compose.production.yml. It applies to small..." property="og:description"/>
<meta content="https://docs.openspp.org/_static/openspp_logo.png" property="og:image"/>
<meta content="OpenSPP Documentation" property="og:image:alt"/>
<meta content="For: System administrators deploying OpenSPP to production This guide covers hardening a single-node Docker Compose deployment using the reference docker-compose.production.yml. It applies to small..." name="description"/>
<meta content="en_US" property="og:locale"/>
<title>Production Hardening – Operations guide – Deployment — OpenSPP Documentation v2.0</title>
<!-- Loaded before other Sphinx assets -->
<link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet"/>
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet"/>
<link href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" rel="stylesheet" type="text/css">
<link href="../../_static/copybutton.css" rel="stylesheet" type="text/css">
<link href="../../_static/sphinxcontrib-httpexample.css" rel="stylesheet" type="text/css">
<link href="../../_static/graphviz.css" rel="stylesheet" type="text/css">
<link href="../../_static/custom.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/print.css" media="print" rel="stylesheet" type="text/css"/>
<link href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" rel="stylesheet" type="text/css"/>
<!-- Pre-loaded scripts that we'll load fully later -->
<link as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf" rel="preload"/>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="../../_static/clipboard.min.js"></script>
<script src="../../_static/copybutton.js"></script>
<script src="../../_static/sphinxcontrib-httpexample.js"></script>
<script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
<script crossorigin="anonymous" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@11.4.0/dist/mermaid.min.js"></script>
<script src="../../_static/search-utils.js"></script>
<script src="../../_static/mermaid_init.js"></script>
<script src="../../_static/patch_scrollToActive.js"></script>
<script src="../../_static/search_shortcut.js"></script>
<script src="../../_static/module-filter.js"></script>
<script src="../../_static/design-tabs.js"></script>
<link href="https://docs.openspp.org/ops_guide/deployment/production-hardening.html" rel="canonical">
<link href="../../_static/opensearch.xml" rel="search" title="Search within OpenSPP Documentation v2.0" type="application/opensearchdescription+xml"/>
<link href="../../_static/icon_192.png" rel="shortcut icon"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="../security/index.html" rel="next" title="Security"/>
<link href="index.html" rel="prev" title="Deployment"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="None" name="docsearch:language"/>
<!-- Google Analytics -->
<!-- Review Status System - DISABLED
<link rel="stylesheet" href="../../_static/review_status.css" type="text/css" />
<script src="../../_static/review_status_simple.js"></script>
-->
<script crossorigin="anonymous" integrity="sha384-vJ1NXwwlC62VkTLRHyzdAfyL4rQ8Z478DeHgamh37YzGJh3T6j223FC2yMRVriLl" src="https://cdn.jsdelivr.net/npm/less@4.1.1"></script>
<!-- Mermaid Support -->
<script crossorigin="anonymous" integrity="sha384-+NGfjU8KzpDLXRHduEqW+ZiJr2rIg+cidUVk7B51R5xK7cHwMKQfrdFwGdrq1Bcz" src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        themeVariables: {
            primaryColor: '#0066cc',
            primaryTextColor: '#000000',
            primaryBorderColor: '#0066cc'
        }
    });
});
</script>
<!-- Matomo Tag Manager -->
<!-- End Matomo Tag Manager -->
</link></link></link></link></link></link></head>
<body data-offset="100" data-spy="scroll" data-target="#bd-toc-nav">
<!-- Checkboxes to toggle the left sidebar -->
<input aria-label="Toggle navigation sidebar" class="sidebar-toggle" id="__navigation" name="__navigation" type="checkbox"/>
<label class="overlay overlay-navbar" for="__navigation">
<div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input aria-label="Toggle in-page Table of Contents" class="sidebar-toggle" id="__page-toc" name="__page-toc" type="checkbox"/>
<label class="overlay overlay-pagetoc" for="__page-toc">
<div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>
<div class="container-fluid" id="banner"></div>
<div class="container-xl">
<div class="row">
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
<div class="bd-sidebar__content">
<div class="bd-sidebar__top"><div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../">
<h1 class="site-logo" id="site-title">OpenSPP Documentation v2.0</h1>
</a>
</div><form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<div class="input-group">
<label class="sr-only" for="q">Search string
    </label>
<i aria-hidden="true" class="fa fa-search fa-lg search-icon"></i>
<input aria-labelledby="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" id="search-input" name="q" placeholder="Search" spellcheck="false" type="search" value="">
<div class="input-group-append">
<span class="input-group-text" id="shortcut">
<kbd id="search-shortcut">⌘</kbd> <kbd>K</kbd>
</span>
</div>
</input></div>
</form><nav aria-label="Main" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item active">
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../products/">
   Products
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox">
<label for="toctree-checkbox-1">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="../../products/sp_mis.html">
     OpenSPP SP-MIS
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../products/social_registry.html">
     OpenSPP Social Registry
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../products/farmer_registry.html">
     OpenSPP Farmer Registry
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../products/drims.html">
     OpenSPP DRIMS
    </a>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../products/features/">
     Features
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
<label for="toctree-checkbox-2">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/unified_registry.html">
       Unified registry
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/gis_land_management.html">
       GIS &amp; land management
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/program_management.html">
       Program management
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/eligibility_targeting.html">
       Eligibility &amp; targeting
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/payment_disbursement.html">
       Payment &amp; disbursement
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/in_kind_benefits.html">
       In-Kind benefits
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/data_integration_apis.html">
       Data integration &amp; APIs
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/change_management.html">
       Change management
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../products/features/grievance_redress.html">
       Grievance redress
      </a>
</li>
</ul>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../products/whats_new_v2.html">
     What's new in OpenSPP v2
    </a>
</li>
</ul>
</input></li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../learn/">
   Learn
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
<label for="toctree-checkbox-3">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/registry.html">
     Registry
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/programs.html">
     Programs
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/cycles.html">
     Cycles
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/eligibility.html">
     Eligibility
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/compliance.html">
     Compliance
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/entitlements.html">
     Entitlements
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/payments.html">
     Payments
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/deduplication.html">
     Deduplication
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../learn/concepts/change-requests.html">
     Change requests
    </a>
</li>
</ul>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../get_started/">
   Get started
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
<label for="toctree-checkbox-4">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../get_started/installation/">
     Installing OpenSPP
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
<label for="toctree-checkbox-5">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/installation/docker.html">
       Docker installation
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../get_started/modules/">
     Module installation
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
<label for="toctree-checkbox-6">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/modules/spmis_installation.html">
       SP-MIS installation
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/modules/social_installation.html">
       Social Registry installation
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/modules/farmer_installation.html">
       Farmer Registry installation
      </a>
</li>
</ul>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../get_started/explore/">
     Explore OpenSPP
    </a>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../get_started/first_household/">
     Your first household
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
<label for="toctree-checkbox-7">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_household/01_access_registry.html">
       Step 1: Access the Registry
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_household/02_create_household.html">
       Step 2: Create a Household
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_household/03_add_members.html">
       Step 3: Add members
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../get_started/first_program/">
     Your first program
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
<label for="toctree-checkbox-8">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_program/01_access_program.html">
       Step 1: Access the program section
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_program/02_create_program.html">
       Step 2: Create your first social protection program
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_program/03_enroll_beneficiaries.html">
       Step 3: Import and enroll beneficiaries
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_program/04_run_cycle.html">
       Step 4: Understanding program cycles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../get_started/first_program/05_distribute_entitlements.html">
       Step 5: Distribute entitlements
      </a>
</li>
</ul>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../get_started/poc_and_pilot.html">
     From Proof of Concept to Pilot
    </a>
</li>
</ul>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../user_guide/">
   User guide
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
<label for="toctree-checkbox-9">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/getting_started/">
     Getting started
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
<label for="toctree-checkbox-10">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/getting_started/navigation.html">
       Navigating the OpenSPP interface
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/registry/">
     Registry
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
<label for="toctree-checkbox-11">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/registry/register_individual.html">
       Register an individual
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/registry/register_group.html">
       Register a group
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/registry/search_filter.html">
       Search and filter registrants
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/registry/import_data.html">
       Import registrant data
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/registry/export_data.html">
       Export registrant data
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/change_requests/">
     Change Requests
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
<label for="toctree-checkbox-12">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/change_requests/submit_change_request.html">
       Submit a change request
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/change_requests/review_change_request.html">
       Review a change request
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/change_requests/change_request_types.html">
       Change request types
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/programs/">
     Programs
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
<label for="toctree-checkbox-13">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/programs/create_programs.html">
       Create programs
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/programs/program_cycles.html">
       Work with program cycles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/programs/enroll_beneficiaries.html">
       Enroll beneficiaries
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/programs/allocate_funds.html">
       Allocate funds to programs
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/programs/manage_entitlements.html">
       Manage entitlements
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/payments/">
     Payments
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
<label for="toctree-checkbox-14">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/payments/service_points.html">
       View Service Points
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/approvals/">
     Approvals
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
<label for="toctree-checkbox-15">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/approvals/manage_approvals.html">
       Review and Approve Requests
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../user_guide/reference/">
     Reference
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
<label for="toctree-checkbox-16">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/reference/areas_geography.html">
       Geographic Areas
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../user_guide/reference/vocabularies.html">
       Vocabularies (Code Lists)
      </a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../config_guide/">
   Configuration guide
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
<label for="toctree-checkbox-17">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/studio/">
     OpenSPP Studio
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
<label for="toctree-checkbox-18">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/studio/overview.html">
       Studio Overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/studio/registry_field_builder.html">
       Custom Fields (Registry Field Builder)
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/studio/event_type_designer.html">
       Event Type Designer
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/studio/change_request_builder.html">
       Change Request Builder
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/cel/">
     CEL expressions
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
<label for="toctree-checkbox-19">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/cel/quick_start.html">
       CEL quick start
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/cel/syntax.html">
       CEL syntax reference
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/cel/variables.html">
       Variables
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/cel/cookbook.html">
       CEL cookbook
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/cel/troubleshooting.html">
       CEL troubleshooting
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/eligibility/">
     Eligibility rules
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
<label for="toctree-checkbox-20">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/eligibility/cel_expressions.html">
       CEL expressions for eligibility
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/eligibility/geographic_targeting.html">
       Geographic targeting
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/eligibility/templates.html">
       Expression templates
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/eligibility/testing.html">
       Testing eligibility rules
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/eligibility/advanced.html">
       Advanced eligibility configuration
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/entitlement_formulas/">
     Entitlement formulas
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
<label for="toctree-checkbox-21">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/entitlement_formulas/cash_calculations.html">
       Cash calculations
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/entitlement_formulas/inkind_baskets.html">
       In-kind and basket entitlements
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/entitlement_formulas/formula_library.html">
       Formula library
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/entitlement_formulas/dynamic_entitlements.html">
       Dynamic entitlements
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/entitlement_formulas/conditional_logic.html">
       Conditional logic
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/vocabulary/">
     Vocabulary System
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
<label for="toctree-checkbox-22">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/vocabulary/overview.html">
       Vocabulary Overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/vocabulary/standard_vocabularies.html">
       Standard Vocabularies
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/vocabulary/profiles.html">
       Vocabulary Profiles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/vocabulary/custom.html">
       Custom Vocabularies
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/variables/">
     Variables &amp; Indicators
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
<label for="toctree-checkbox-23">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/variables/overview.html">
       Variables Overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/variables/creating_variables.html">
       Creating Variables
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/variables/variable_types.html">
       Variable Types
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/variables/using_variables.html">
       Using Variables in CEL
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/event_data/">
     Event Data
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
<label for="toctree-checkbox-24">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/event_data/overview.html">
       Event Data Overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/event_data/event_types.html">
       Configuring Event Types
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/event_data/field_definitions.html">
       Defining Event Fields
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/change_request_types/">
     Change request types
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/>
<label for="toctree-checkbox-25">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/overview.html">
       Overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/creating_types.html">
       Creating change request types
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/field_mappings.html">
       Field mappings
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/conflict_detection.html">
       Conflict and duplicate detection
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/patterns.html">
       Common configuration patterns
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/custom_detail_models.html">
       Custom detail models
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/change_request_types/troubleshooting.html">
       Troubleshooting
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/consent/">
     Consent configuration
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/>
<label for="toctree-checkbox-26">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/consent/overview.html">
       Consent management overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/consent/privacy_notices.html">
       Configuring privacy notices
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/consent/recording_consent.html">
       Recording consent
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/consent/api_consent_filtering.html">
       API consent filtering
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../config_guide/role_configuration/">
     Role configuration
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/>
<label for="toctree-checkbox-27">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/role_configuration/overview.html">
       Access control overview
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/role_configuration/assigning_roles.html">
       Assigning roles to users
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/role_configuration/predefined_roles.html">
       Predefined roles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/role_configuration/creating_roles.html">
       Creating custom roles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../config_guide/role_configuration/troubleshooting.html">
       Troubleshooting
      </a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current active has-children">
<a class="reference internal" href="../">
   Operations guide
  </a>
<input checked="" class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/>
<label for="toctree-checkbox-28">
<i class="fas fa-chevron-down">
</i>
</label>
<ul class="current">
<li class="toctree-l2 current active has-children">
<a class="reference internal" href="">
     Deployment
    </a>
<input checked="" class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/>
<label for="toctree-checkbox-29">
<i class="fas fa-chevron-down">
</i>
</label>
<ul class="current">
<li class="toctree-l3 current active">
<a class="current reference internal" href="#">
       Production Hardening
      </a>
</li>
</ul>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../security/">
     Security
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" type="checkbox"/>
<label for="toctree-checkbox-30">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../security/access_control.html">
       Access Control
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../security/data_classification.html">
       Data Classification
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../security/pii_encryption.html">
       PII Encryption
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../security/key_management.html">
       Key Management
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../security/audit.html">
       Audit Logging
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../security/scanning.html">
       Security Scanning
      </a>
</li>
</ul>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../storage/">
     Storage
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../backup/">
     Backup &amp; Recovery
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../monitoring/">
     Monitoring &amp; Alerts
    </a>
</li>
</ul>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../reference/">
   Reference
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" type="checkbox"/>
<label for="toctree-checkbox-31">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../../reference/modules/">
     Modules Reference
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" type="checkbox"/>
<label for="toctree-checkbox-32">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2.html">
       API V2
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2_cycles.html">
       API V2 - Cycles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2_data.html">
       API V2 - Data
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2_entitlements.html">
       API V2 - Entitlements
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2_products.html">
       API V2 - Products
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2_service_points.html">
       API V2 - Service Points
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_api_v2_vocabulary.html">
       API V2 - Vocabulary
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_approval.html">
       Approval Workflows
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_area.html">
       Area Management
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_audit.html">
       Audit
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_banking.html">
       Banking / Bank Details
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_base_common.html">
       Base (Common)
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_base_setting.html">
       Base Settings
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_branding_kit.html">
       Branding Kit
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_cel_domain.html">
       CEL Domain Query Builder
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_cel_widget.html">
       CEL Expression Widget
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_change_request_v2.html">
       Change Request V2
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_claim_169.html">
       QR Credentials (Claim 169)
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_consent.html">
       Consent
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_cr_types_advanced.html">
       CR Types - Advanced
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_cr_types_base.html">
       CR Types - Base
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_custom_field.html">
       Custom Fields
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_dci_client.html">
       DCI Client
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_dci_client_crvs.html">
       DCI Client - CRVS
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_dci_client_dr.html">
       DCI Client - Disability Registry
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_dci_client_ibr.html">
       DCI Client - IBR
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_dci_server.html">
       DCI Server
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_demo.html">
       Demo
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_dms.html">
       Document Management System
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_event_data.html">
       Event Data
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_gis.html">
       GIS
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_gis_report.html">
       GIS Reports
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_grm.html">
       Grievance Redress Mechanism
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_hide_menus_base.html">
       Hide Menus Base
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_key_management.html">
       Key Management
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_mis_demo_v2.html">
       MIS Demo V2
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_programs.html">
       Programs
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_registry.html">
       Registry
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_registry_search.html">
       Registry Search Portal
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_security.html">
       Security
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_service_points.html">
       Service Points
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_source_tracking.html">
       Source Tracking
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_starter_social_registry.html">
       Starter: Social Registry
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_starter_sp_mis.html">
       Starter: SP-MIS
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_studio.html">
       Studio
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_studio_change_requests.html">
       Studio - Change Requests
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_studio_events.html">
       Studio - Events
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_user_roles.html">
       User Roles
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_versioning.html">
       Versioning
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/spp_vocabulary.html">
       Vocabulary
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../reference/modules/theme_openspp_muk.html">
       Theme
      </a>
</li>
</ul>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../reference/vocabularies/">
     Vocabulary Reference
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../reference/glossary/humanitarian.html">
     Humanitarian Terms Glossary
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../glossary.html">
     OpenSPP Glossary
    </a>
</li>
</ul>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="../../community_and_support/">
   Community and support
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" type="checkbox"/>
<label for="toctree-checkbox-33">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/how_to_contribute_to_the_project.html">
     Contributing
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/i18n_l10n.html">
     Internationalization and Localization
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/module_lifecycle_development_status.html">
     Modules Maturity Levels and Development Status Policy
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/module_lifecycle_maintainer_role.html">
     Module Lifecycle - Maintainer Role Policy
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/code_of_conduct.html">
     Contributor Covenant Code of Conduct
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/security_report.html">
     OpenSPP Vulnerability Disclosure Policy
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../community_and_support/license.html">
     Licensing
    </a>
</li>
</ul>
</li>
</ul>
</div>
</nav></div>
<div class="bd-sidebar__bottom">
<!-- To handle the deprecated key -->
<div class="navbar_extra_footer">
<p class="openspporglink">
<a href="https://openspp.org">
<img alt="openspp.org" src="/_static/openspp_logo.png"/> openspp.org</a>
</p>
</div>
</div>
</div>
<div id="rtd-footer-container"></div>
</div>
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
<div class="header-article row sticky-top noprint">
<div class="col py-1 d-flex header-article-main">
<div class="header-article__left">
<label class="headerbtn" data-placement="right" data-toggle="tooltip" for="__navigation" title="Toggle navigation">
<span class="headerbtn__icon-container">
<i class="fas fa-bars"></i>
</span>
</label>
</div>
<div class="header-article__label">
<span>Production Hardening – Operations guide</span>
</div>
<div class="header-article__right">
<button class="headerbtn" data-placement="bottom" data-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode">
<span class="headerbtn__icon-container">
<i class="fas fa-expand"></i>
</span>
</button>
<div class="menu-dropdown menu-dropdown-repository-buttons">
<button aria-label="Source repositories" class="headerbtn menu-dropdown__trigger">
<i class="fab fa-github"></i>
</button>
<div class="menu-dropdown__content">
<ul>
<li>
<a class="headerbtn" data-placement="left" data-toggle="tooltip" href="https://github.com/openspp/documentation" title="Source repository">
<span class="headerbtn__icon-container">
<i class="fab fa-github"></i>
</span>
<span class="headerbtn__text-container">repository</span>
</a>
</li>
<li>
<a class="headerbtn" data-placement="left" data-toggle="tooltip" href="https://github.com/openspp/documentation/issues/new?title=Issue%20on%20page%20%2Fops_guide/deployment/production-hardening.html&amp;body=Your%20issue%20content%20here." title="Open an issue">
<span class="headerbtn__icon-container">
<i class="fas fa-lightbulb"></i>
</span>
<span class="headerbtn__text-container">open issue</span>
</a>
</li>
<li>
<a class="headerbtn" data-placement="left" data-toggle="tooltip" href="https://docs.openspp.org/contributing/?ops_guide/deployment/production-hardening.md#making-contributions-on-github" title="Edit this page">
<span class="headerbtn__icon-container">
<i class="fas fa-pencil-alt"></i>
</span>
<span class="headerbtn__text-container">suggest edit</span>
</a>
</li>
</ul>
</div>
</div>
<div class="menu-dropdown menu-dropdown-download-buttons">
<button aria-label="Download this page" class="headerbtn menu-dropdown__trigger">
<i class="fas fa-download"></i>
</button>
<div class="menu-dropdown__content">
<ul>
<li>
<a class="headerbtn" data-placement="left" data-toggle="tooltip" href="../../_sources/ops_guide/deployment/production-hardening.md.txt" title="Download source file">
<span class="headerbtn__icon-container">
<i class="fas fa-file"></i>
</span>
<span class="headerbtn__text-container">.md</span>
</a>
</li>
<li>
<button class="headerbtn" data-placement="left" data-toggle="tooltip" onclick="printPdf(this)" title="Print to PDF">
<span class="headerbtn__icon-container">
<i class="fas fa-file-pdf"></i>
</span>
<span class="headerbtn__text-container">.pdf</span>
</button>
</li>
</ul>
</div>
</div>
<label class="headerbtn headerbtn-page-toc" for="__page-toc">
<span class="headerbtn__icon-container">
<i class="fas fa-list"></i>
</span>
</label>
</div>
</div>
<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
<div class="tocsection onthispage pt-5 pb-3">
<i class="fas fa-list"></i> Contents
    </div>
<nav aria-label="Page" id="bd-toc-nav">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#architecture-overview">
   Architecture Overview
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#https-and-tls">
   HTTPS and TLS
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#configuration">
     Configuration
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#hsts">
     HSTS
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#security-headers">
   Security Headers
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#database-manager-blocking">
   Database Manager Blocking
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#choose-a-database-management-policy-two-options">
     Choose a Database Management Policy (Two Options)
    </a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#init-script-example-option-a">
       Init Script Example (Option A)
      </a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#database-filter-dbfilter">
   Database Filter (dbfilter)
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#websocket-routing">
   WebSocket Routing
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#rate-limiting">
   Rate Limiting
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#tuning">
     Tuning
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#brute-force-protection-with-fail2ban">
   Brute Force Protection with fail2ban
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#cookie-security">
   Cookie Security
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#postgresql-hardening">
   PostgreSQL Hardening
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#non-superuser-database-user">
     Non-Superuser Database User
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#master-password">
     Master Password
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#connection-encryption">
     Connection Encryption
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#network-restrictions">
     Network Restrictions
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#proxy-mode">
   Proxy Mode
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#worker-sizing">
   Worker Sizing
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#memory-limits">
     Memory Limits
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#request-limits">
     Request Limits
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#verification-checklist">
   Verification Checklist
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#troubleshooting">
   Troubleshooting
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#certificate-not-issued">
     Certificate Not Issued
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#bad-gateway">
     502 Bad Gateway
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#websocket-timeout">
     WebSocket Timeout
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#rate-limit-too-strict">
     Rate Limit Too Strict
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#related-documentation">
   Related Documentation
  </a>
</li>
</ul>
</nav>
</div>
</div>
<div class="article row">
<div class="col pl-md-3 pl-lg-5 content-container">
<!-- Table of contents that is only displayed when printing the page -->
<div class="onlyprint" id="jb-print-docs-body">
<h1>Production Hardening</h1>
<!-- Table of contents -->
<div id="print-main-content">
<div id="jb-print-toc">
<div>
<h2> Contents </h2>
</div>
<nav aria-label="Page">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#architecture-overview">
   Architecture Overview
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#https-and-tls">
   HTTPS and TLS
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#configuration">
     Configuration
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#hsts">
     HSTS
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#security-headers">
   Security Headers
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#database-manager-blocking">
   Database Manager Blocking
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#choose-a-database-management-policy-two-options">
     Choose a Database Management Policy (Two Options)
    </a>
<ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry">
<a class="reference internal nav-link" href="#init-script-example-option-a">
       Init Script Example (Option A)
      </a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#database-filter-dbfilter">
   Database Filter (dbfilter)
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#websocket-routing">
   WebSocket Routing
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#rate-limiting">
   Rate Limiting
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#tuning">
     Tuning
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#brute-force-protection-with-fail2ban">
   Brute Force Protection with fail2ban
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#cookie-security">
   Cookie Security
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#postgresql-hardening">
   PostgreSQL Hardening
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#non-superuser-database-user">
     Non-Superuser Database User
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#master-password">
     Master Password
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#connection-encryption">
     Connection Encryption
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#network-restrictions">
     Network Restrictions
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#proxy-mode">
   Proxy Mode
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#worker-sizing">
   Worker Sizing
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#memory-limits">
     Memory Limits
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#request-limits">
     Request Limits
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#verification-checklist">
   Verification Checklist
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#troubleshooting">
   Troubleshooting
  </a>
<ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#certificate-not-issued">
     Certificate Not Issued
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#bad-gateway">
     502 Bad Gateway
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#websocket-timeout">
     WebSocket Timeout
    </a>
</li>
<li class="toc-h3 nav-item toc-entry">
<a class="reference internal nav-link" href="#rate-limit-too-strict">
     Rate Limit Too Strict
    </a>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#related-documentation">
   Related Documentation
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<main id="main-content" role="main">
<div>
<div class="section" id="production-hardening">
<h1>Production Hardening<a class="headerlink" href="#production-hardening" title="Permalink to this headline">#</a></h1>
<p><strong>For:</strong> System administrators deploying OpenSPP to production</p>
<p>This guide covers hardening a single-node Docker Compose deployment using the reference <code class="docutils literal notranslate"><span class="pre">docker-compose.production.yml</span></code>. It applies to small-to-medium deployments (10k-100k beneficiaries) on a single VPS or cloud instance.</p>
<div class="section" id="architecture-overview">
<h2>Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permalink to this headline">#</a></h2>
<p>The production stack runs four services behind a Traefik reverse proxy:</p>
<pre class="mermaid">
        flowchart TB
    Internet((Internet))

    subgraph proxy["Traefik v3.2 (ports 80/443)"]
        direction TB
        TLS["TLS termination, headers, rate limiting"]
    end

    subgraph odoo["Odoo Services"]
        direction LR
        OdooHTTP["Odoo&lt;br/&gt;:8069&lt;br/&gt;(HTTP)"]
        OdooWS["Odoo WS&lt;br/&gt;:8072&lt;br/&gt;(WebSocket)"]
    end

    subgraph workers["Background Processing"]
        QueueWorker["Queue Worker&lt;br/&gt;(Odoo gevent mode)"]
    end

    subgraph db["Database"]
        PostgreSQL[("PostgreSQL 18&lt;br/&gt;PostGIS 3.6&lt;br/&gt;:5432")]
    end

    Internet --&gt; proxy
    proxy --&gt; OdooHTTP
    proxy --&gt; OdooWS
    OdooHTTP --&gt; PostgreSQL
    OdooWS --&gt; PostgreSQL
    QueueWorker --&gt; PostgreSQL
    </pre><p>Traefik handles TLS termination, security headers, rate limiting, and database manager blocking. Odoo runs in multi-worker mode with a separate gevent-based queue worker for background jobs.</p>
</div>
<div class="section" id="https-and-tls">
<h2>HTTPS and TLS<a class="headerlink" href="#https-and-tls" title="Permalink to this headline">#</a></h2>
<p>Traefik obtains certificates automatically from Let's Encrypt using the HTTP-01 challenge. All HTTP traffic is redirected to HTTPS.</p>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h3>
<p>Set <code class="docutils literal notranslate"><span class="pre">ACME_EMAIL</span></code> in your <code class="docutils literal notranslate"><span class="pre">.env.production</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">ACME_EMAIL</span><span class="o">=</span>admin@example.org
<span class="nv">DOMAIN</span><span class="o">=</span>openspp.example.org
</pre></div>
</div>
<p>Traefik stores certificates in a Docker volume (<code class="docutils literal notranslate"><span class="pre">traefik_certs</span></code>) so they persist across restarts.</p>
</div>
<div class="section" id="hsts">
<h3>HSTS<a class="headerlink" href="#hsts" title="Permalink to this headline">#</a></h3>
<p>Strict-Transport-Security is enabled with a one-year max-age and includes subdomains:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Strict</span><span class="o">-</span><span class="n">Transport</span><span class="o">-</span><span class="n">Security</span><span class="p">:</span> <span class="nb">max</span><span class="o">-</span><span class="n">age</span><span class="o">=</span><span class="mi">31536000</span><span class="p">;</span> <span class="n">includeSubDomains</span>
</pre></div>
</div>
<p>This tells browsers to only connect via HTTPS for the next year.</p>
</div>
</div>
<div class="section" id="security-headers">
<h2>Security Headers<a class="headerlink" href="#security-headers" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">odoo-headers</span></code> middleware injects the following response headers:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Header</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Strict-Transport-Security</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max-age=31536000;</span> <span class="pre">includeSubDomains</span></code></p></td>
<td><p>Force HTTPS for 1 year</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X-Content-Type-Options</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nosniff</span></code></p></td>
<td><p>Prevent MIME-type sniffing</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X-Frame-Options</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DENY</span></code></p></td>
<td><p>Block framing (clickjacking protection)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Content-Security-Policy</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">default-src</span> <span class="pre">'self';</span> <span class="pre">script-src</span> <span class="pre">'self'</span> <span class="pre">'unsafe-inline'</span> <span class="pre">'unsafe-eval';</span> <span class="pre">style-src</span> <span class="pre">'self'</span> <span class="pre">'unsafe-inline';</span> <span class="pre">img-src</span> <span class="pre">'self'</span> <span class="pre">data:</span> <span class="pre">blob:;</span> <span class="pre">font-src</span> <span class="pre">'self'</span> <span class="pre">data:;</span> <span class="pre">frame-ancestors</span> <span class="pre">'self';</span> <span class="pre">base-uri</span> <span class="pre">'self';</span> <span class="pre">form-action</span> <span class="pre">'self';</span></code></p></td>
<td><p>Restrict resource loading origins</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Referrer-Policy</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">strict-origin-when-cross-origin</span></code></p></td>
<td><p>Limit referrer leakage to cross-origin requests</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Permissions-Policy</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">camera=(),</span> <span class="pre">microphone=(),</span> <span class="pre">geolocation=(),</span> <span class="pre">payment=()</span></code></p></td>
<td><p>Disable unused browser APIs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X-XSS-Protection</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1;</span> <span class="pre">mode=block</span></code></p></td>
<td><p>Legacy XSS filter (browsers that lack CSP support)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Server</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenSPP</span></code></p></td>
<td><p>Hide Werkzeug/Python version</p></td>
</tr>
</tbody>
</table>
<p>The CSP includes <code class="docutils literal notranslate"><span class="pre">'unsafe-inline'</span></code> and <code class="docutils literal notranslate"><span class="pre">'unsafe-eval'</span></code> for <code class="docutils literal notranslate"><span class="pre">script-src</span></code> because Odoo's web client requires inline scripts and <code class="docutils literal notranslate"><span class="pre">eval()</span></code> for its QWeb template engine.</p>
</div>
<div class="section" id="database-manager-blocking">
<h2>Database Manager Blocking<a class="headerlink" href="#database-manager-blocking" title="Permalink to this headline">#</a></h2>
<p>The Odoo database manager (<code class="docutils literal notranslate"><span class="pre">/web/database</span></code>) allows creating, duplicating, and dropping databases. In production this must be disabled.</p>
<p>The compose file uses two complementary mechanisms:</p>
<ol class="arabic simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">LIST_DB=False</span></code></strong> environment variable prevents Odoo from listing databases</p></li>
<li><p><strong>Traefik <code class="docutils literal notranslate"><span class="pre">block-dbmanager</span></code> middleware</strong> redirects any request to <code class="docutils literal notranslate"><span class="pre">/web/database*</span></code> to <code class="docutils literal notranslate"><span class="pre">/web/login</span></code></p></li>
</ol>
<p>The Traefik rule uses a higher priority (<code class="docutils literal notranslate"><span class="pre">priority=20</span></code>) to match before the main Odoo router:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traefik labels on the odoo service</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.routers.odoo-dbmanager.rule=Host(`${DOMAIN}`)</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">PathPrefix(`/web/database`)"</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.routers.odoo-dbmanager.priority=20"</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.middlewares.block-dbmanager.replacepathregex.regex=^/web/database.*"</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.middlewares.block-dbmanager.replacepathregex.replacement=/web/login"</span>
</pre></div>
</div>
<p>Both layers are needed because <code class="docutils literal notranslate"><span class="pre">LIST_DB=False</span></code> alone does not block direct URL access to the database manager.</p>
<div class="section" id="choose-a-database-management-policy-two-options">
<h3>Choose a Database Management Policy (Two Options)<a class="headerlink" href="#choose-a-database-management-policy-two-options" title="Permalink to this headline">#</a></h3>
<p>Your security posture determines how strictly you lock down database creation and restore operations. Odoo supports two patterns; choose one explicitly and document it for your team:</p>
<p><strong>Option A — Strict hardening (recommended for production):</strong></p>
<ul class="simple">
<li><p>Odoo runs as a <strong>non-superuser</strong> with <strong>NO CREATEDB</strong></p></li>
<li><p>The database is created/owned by an admin role (not the Odoo role)</p></li>
<li><p>The DB manager UI is effectively disabled (even with the master password)</p></li>
<li><p>All create/drop/restore operations require an admin role outside Odoo</p></li>
</ul>
<p><strong>Option B — Operational flexibility (acceptable for controlled environments):</strong></p>
<ul class="simple">
<li><p>Odoo role can <strong>CREATEDB</strong> (still not a superuser)</p></li>
<li><p>DB manager UI can be used for backup/restore if needed</p></li>
<li><p>Higher risk: a compromised Odoo user can create databases and exfiltrate data</p></li>
</ul>
<p>If you choose Option A, you must provision roles explicitly (init script or external DBA tooling) rather than relying on the default container user.
When using the bundled PostgreSQL container, the role defined by <code class="docutils literal notranslate"><span class="pre">POSTGRES_USER</span></code> is created as a superuser by the official image initialization. For Option A, keep <code class="docutils literal notranslate"><span class="pre">POSTGRES_USER</span></code> as an admin role and create the <code class="docutils literal notranslate"><span class="pre">odoo</span></code> role with <code class="docutils literal notranslate"><span class="pre">NOSUPERUSER</span> <span class="pre">NOCREATEDB</span></code> in an init script.</p>
<div class="section" id="init-script-example-option-a">
<h4>Init Script Example (Option A)<a class="headerlink" href="#init-script-example-option-a" title="Permalink to this headline">#</a></h4>
<p>If you use the bundled PostgreSQL container, place an SQL file in <code class="docutils literal notranslate"><span class="pre">/docker-entrypoint-initdb.d</span></code> so roles are created on first initialization. For example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- docker/initdb/01-create-roles.sql</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">odoo</span><span class="w"> </span><span class="n">LOGIN</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'strong-password-here'</span><span class="w"> </span><span class="n">NOSUPERUSER</span><span class="w"> </span><span class="k">NOCREATEDB</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">openspp_admin</span><span class="w"> </span><span class="n">LOGIN</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'admin-password-here'</span><span class="w"> </span><span class="n">SUPERUSER</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">openspp</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="n">openspp_admin</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">openspp</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">odoo</span><span class="p">;</span>
</pre></div>
</div>
<p>Mount the init directory in your database service (path is relative to the compose file directory):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./initdb:/docker-entrypoint-initdb.d:ro</span>
</pre></div>
</div>
<p>These scripts only run when the database data directory is empty. If the volume already exists, run the SQL manually as the admin role.</p>
</div>
</div>
</div>
<div class="section" id="database-filter-dbfilter">
<h2>Database Filter (dbfilter)<a class="headerlink" href="#database-filter-dbfilter" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DB_FILTER</span></code> setting restricts which database Odoo will serve. This is critical for security in production.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># In .env.production</span>
<span class="nv">DB_NAME</span><span class="o">=</span>openspp
<span class="nv">DB_FILTER</span><span class="o">=</span>^openspp$
</pre></div>
</div>
<p>The filter is a regular expression. The <code class="docutils literal notranslate"><span class="pre">^...$</span></code> anchors ensure an exact match, preventing access to other databases that might exist on the same PostgreSQL server.</p>
<p>Without a proper <code class="docutils literal notranslate"><span class="pre">dbfilter</span></code>:</p>
<ul class="simple">
<li><p>Attackers could probe for other databases</p></li>
<li><p>Multi-tenant confusion could expose data across tenants</p></li>
<li><p>The database selector might appear on the login page</p></li>
</ul>
<p>The compose file sets <code class="docutils literal notranslate"><span class="pre">DB_FILTER</span></code> automatically based on <code class="docutils literal notranslate"><span class="pre">DB_NAME</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">DB_FILTER</span><span class="p">:</span><span class="w"> </span><span class="s">"^${DB_NAME:-openspp}$$"</span>
</pre></div>
</div>
</div>
<div class="section" id="websocket-routing">
<h2>WebSocket Routing<a class="headerlink" href="#websocket-routing" title="Permalink to this headline">#</a></h2>
<p>Odoo 19 uses WebSocket connections on port 8072 for live updates (bus notifications, chat, presence). The <code class="docutils literal notranslate"><span class="pre">/websocket</span></code> path is routed to the longpolling service:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.routers.odoo-websocket.rule=Host(`${DOMAIN}`)</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">PathPrefix(`/websocket`)"</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.services.odoo-websocket.loadbalancer.server.port=8072"</span>
</pre></div>
</div>
<p>This router has <code class="docutils literal notranslate"><span class="pre">priority=15</span></code> so it matches before the default Odoo router but after the database manager block.</p>
<p>If WebSocket routing is misconfigured, you will see:</p>
<ul class="simple">
<li><p>Chat messages not appearing in real time</p></li>
<li><p>"Bus connection lost" warnings in the browser console</p></li>
<li><p>Notifications requiring page refresh to appear</p></li>
</ul>
</div>
<div class="section" id="rate-limiting">
<h2>Rate Limiting<a class="headerlink" href="#rate-limiting" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">odoo-ratelimit</span></code> middleware provides brute-force protection:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">average</span></code></p></td>
<td><p>50</p></td>
<td><p>50 requests per period allowed per source IP</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">burst</span></code></p></td>
<td><p>100</p></td>
<td><p>Up to 100 requests in a burst before throttling</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">period</span></code></p></td>
<td><p>1m</p></td>
<td><p>Rate window is 1 minute</p></td>
</tr>
</tbody>
</table>
<p>Both <code class="docutils literal notranslate"><span class="pre">odoo-headers</span></code> and <code class="docutils literal notranslate"><span class="pre">odoo-ratelimit</span></code> are applied to the main Odoo router:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"traefik.http.routers.odoo.middlewares=odoo-headers,odoo-ratelimit"</span>
</pre></div>
</div>
<div class="section" id="tuning">
<h3>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>If legitimate users hit rate limits (e.g., during data imports via the UI), increase <code class="docutils literal notranslate"><span class="pre">average</span></code> and <code class="docutils literal notranslate"><span class="pre">burst</span></code></p></li>
<li><p>For higher security, reduce <code class="docutils literal notranslate"><span class="pre">average</span></code> to 20-30 for login-heavy deployments</p></li>
<li><p>Rate limiting applies per source IP, so users behind a shared NAT may trigger limits sooner</p></li>
</ul>
</div>
</div>
<div class="section" id="brute-force-protection-with-fail2ban">
<h2>Brute Force Protection with fail2ban<a class="headerlink" href="#brute-force-protection-with-fail2ban" title="Permalink to this headline">#</a></h2>
<p>For additional protection against brute-force attacks, configure fail2ban on the host to monitor Odoo login failures.</p>
<p>Odoo logs failed login attempts in this format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2024</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">15</span> <span class="mi">14</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span><span class="mi">506</span> <span class="mi">24849</span> <span class="n">INFO</span> <span class="n">openspp</span> <span class="n">odoo</span><span class="o">.</span><span class="n">addons</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">res</span><span class="o">.</span><span class="n">res_users</span><span class="p">:</span> <span class="n">Login</span> <span class="n">failed</span> <span class="k">for</span> <span class="n">db</span><span class="p">:</span><span class="n">openspp</span> <span class="n">login</span><span class="p">:</span><span class="n">admin</span> <span class="kn">from</span> <span class="mf">192.168.1.100</span>
</pre></div>
</div>
<p>Create <code class="docutils literal notranslate"><span class="pre">/etc/fail2ban/jail.d/odoo.conf</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[odoo-login]</span>
<span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">http,https</span>
<span class="na">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">odoo-login</span>
<span class="na">logpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/log/odoo/odoo.log</span>
<span class="na">bantime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">900</span>
<span class="na">maxretry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10</span>
<span class="na">findtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">60</span>
</pre></div>
</div>
<p>Create <code class="docutils literal notranslate"><span class="pre">/etc/fail2ban/filter.d/odoo-login.conf</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Definition]</span>
<span class="na">failregex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">^ \d+ INFO \S+ odoo.addons.base.res.res_users: Login failed for db:\S+ login:\S+ from &lt;HOST&gt;</span>
<span class="na">ignoreregex</span><span class="w"> </span><span class="o">=</span>
</pre></div>
</div>
<p>This bans an IP for 15 minutes after 10 failed login attempts within 1 minute.</p>
<p>To use fail2ban with Docker, either:</p>
<ol class="arabic simple">
<li><p>Mount Odoo logs to the host filesystem</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span></code> with a log driver that writes to syslog</p></li>
</ol>
</div>
<div class="section" id="cookie-security">
<h2>Cookie Security<a class="headerlink" href="#cookie-security" title="Permalink to this headline">#</a></h2>
<p>Odoo uses Werkzeug as its HTTP server. Werkzeug 2.3+ sets <code class="docutils literal notranslate"><span class="pre">SameSite=Lax</span></code> on cookies by default, which prevents CSRF attacks from cross-origin requests.</p>
<p>Verify cookie flags in production:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-sI<span class="w"> </span>https://yourdomain.com/web/login<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>set-cookie
</pre></div>
</div>
<p>You should see <code class="docutils literal notranslate"><span class="pre">SameSite=Lax</span></code> and <code class="docutils literal notranslate"><span class="pre">Secure</span></code> on the <code class="docutils literal notranslate"><span class="pre">session_id</span></code> cookie.</p>
<p><strong>Note:</strong> Traefik v3 does not support rewriting cookie flags natively (unlike nginx's <code class="docutils literal notranslate"><span class="pre">proxy_cookie_flags</span></code> directive). The <code class="docutils literal notranslate"><span class="pre">SameSite=Lax</span></code> flag relies on Werkzeug setting it at the application level, which it does by default in Odoo 19.</p>
</div>
<div class="section" id="postgresql-hardening">
<h2>PostgreSQL Hardening<a class="headerlink" href="#postgresql-hardening" title="Permalink to this headline">#</a></h2>
<div class="section" id="non-superuser-database-user">
<h3>Non-Superuser Database User<a class="headerlink" href="#non-superuser-database-user" title="Permalink to this headline">#</a></h3>
<p>The PostgreSQL user connecting to Odoo <strong>must not be a superuser</strong>. This limits the damage if an SQL injection vulnerability is exploited.</p>
<p>Use one of the two policies above:</p>
<ul class="simple">
<li><p><strong>Option A (strict):</strong> <code class="docutils literal notranslate"><span class="pre">odoo</span></code> is <strong>NOSUPERUSER NOCREATEDB</strong>, database owned by admin role</p></li>
<li><p><strong>Option B (flexible):</strong> <code class="docutils literal notranslate"><span class="pre">odoo</span></code> is <strong>NOSUPERUSER CREATEDB</strong>, database owned by <code class="docutils literal notranslate"><span class="pre">odoo</span></code></p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Option A (strict): admin-owned database, Odoo has no createdb</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">odoo</span><span class="w"> </span><span class="n">LOGIN</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'strong-password-here'</span><span class="w"> </span><span class="n">NOSUPERUSER</span><span class="w"> </span><span class="k">NOCREATEDB</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">openspp_admin</span><span class="w"> </span><span class="n">LOGIN</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'admin-password-here'</span><span class="w"> </span><span class="n">SUPERUSER</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">openspp</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="n">openspp_admin</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">openspp</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">odoo</span><span class="p">;</span>

<span class="c1">-- Option B (flexible): Odoo can create databases (still not superuser)</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">odoo</span><span class="w"> </span><span class="n">LOGIN</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'strong-password-here'</span><span class="w"> </span><span class="n">NOSUPERUSER</span><span class="w"> </span><span class="k">CREATEDB</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">openspp</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="n">odoo</span><span class="p">;</span>

<span class="c1">-- Verify the user is NOT a superuser</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">usename</span><span class="p">,</span><span class="w"> </span><span class="n">usesuper</span><span class="p">,</span><span class="w"> </span><span class="n">usecreatedb</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pg_user</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">usename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'odoo'</span><span class="p">;</span>
<span class="c1">-- Expected: usesuper = false</span>
</pre></div>
</div>
</div>
<div class="section" id="master-password">
<h3>Master Password<a class="headerlink" href="#master-password" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ODOO_ADMIN_PASSWD</span></code> (master password) protects database management operations. Generate a strong random password:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-c<span class="w"> </span><span class="s1">'import base64, os; print(base64.b64encode(os.urandom(24)).decode())'</span>
</pre></div>
</div>
<p>Store this password securely (e.g., in a password manager or secrets vault). It is required for database backup/restore operations via the Odoo interface if you use <strong>Option B</strong> above. In <strong>Option A</strong>, database operations should be done via admin tooling outside Odoo.</p>
</div>
<div class="section" id="connection-encryption">
<h3>Connection Encryption<a class="headerlink" href="#connection-encryption" title="Permalink to this headline">#</a></h3>
<p>Set <code class="docutils literal notranslate"><span class="pre">DB_SSLMODE</span></code> in <code class="docutils literal notranslate"><span class="pre">.env.production</span></code> to encrypt database connections:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Use When</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prefer</span></code></p></td>
<td><p>Default. Uses SSL if available, falls back to unencrypted</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">require</span></code></p></td>
<td><p>External database (RDS, Cloud SQL). Enforces SSL</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">verify-ca</span></code></p></td>
<td><p>Strict mode. Verifies server certificate against CA</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">verify-full</span></code></p></td>
<td><p>Strictest. Verifies certificate and hostname match</p></td>
</tr>
</tbody>
</table>
<p>For local PostgreSQL (same Docker network), <code class="docutils literal notranslate"><span class="pre">prefer</span></code> is acceptable. For external databases, use <code class="docutils literal notranslate"><span class="pre">require</span></code> or stricter.</p>
</div>
<div class="section" id="network-restrictions">
<h3>Network Restrictions<a class="headerlink" href="#network-restrictions" title="Permalink to this headline">#</a></h3>
<p>The PostgreSQL service is only accessible within the <code class="docutils literal notranslate"><span class="pre">openspp-prod</span></code> Docker network. It does not bind to any host port, so it cannot be reached from outside the Docker network.</p>
<p>If you need external database access (e.g., for backups from another host), use an SSH tunnel rather than exposing the port.</p>
</div>
</div>
<div class="section" id="proxy-mode">
<h2>Proxy Mode<a class="headerlink" href="#proxy-mode" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PROXY_MODE=True</span></code> is required when running behind a reverse proxy. It tells Odoo to:</p>
<ul class="simple">
<li><p>Trust <code class="docutils literal notranslate"><span class="pre">X-Forwarded-For</span></code> headers for client IP detection</p></li>
<li><p>Trust <code class="docutils literal notranslate"><span class="pre">X-Forwarded-Proto</span></code> headers for HTTPS detection</p></li>
<li><p>Generate correct URLs in emails and redirects</p></li>
</ul>
<p>Without proxy mode, Odoo sees all requests as coming from Traefik's internal IP on HTTP, which breaks:</p>
<ul class="simple">
<li><p>IP-based rate limiting</p></li>
<li><p>Audit logs (all requests logged as proxy IP)</p></li>
<li><p>HTTPS redirect loops</p></li>
<li><p>Session cookie security (cookies not marked <code class="docutils literal notranslate"><span class="pre">Secure</span></code>)</p></li>
</ul>
</div>
<div class="section" id="worker-sizing">
<h2>Worker Sizing<a class="headerlink" href="#worker-sizing" title="Permalink to this headline">#</a></h2>
<p>Odoo recommends the formula: <strong>(CPU cores × 2) + 1</strong> workers, with approximately <strong>1 worker serving 6 concurrent users</strong>.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Beneficiaries</p></th>
<th class="head"><p>Concurrent Users</p></th>
<th class="head"><p>Workers</p></th>
<th class="head"><p>RAM (Total)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10,000</p></td>
<td><p>~12</p></td>
<td><p>2</p></td>
<td><p>4 GB</p></td>
</tr>
<tr class="row-odd"><td><p>50,000</p></td>
<td><p>~24</p></td>
<td><p>4</p></td>
<td><p>8 GB</p></td>
</tr>
<tr class="row-even"><td><p>100,000</p></td>
<td><p>~36</p></td>
<td><p>6</p></td>
<td><p>16 GB</p></td>
</tr>
</tbody>
</table>
<div class="section" id="memory-limits">
<h3>Memory Limits<a class="headerlink" href="#memory-limits" title="Permalink to this headline">#</a></h3>
<p>Each worker has soft and hard memory limits:</p>
<ul class="simple">
<li><p><strong>Soft limit</strong> (<code class="docutils literal notranslate"><span class="pre">ODOO_MEMORY_SOFT</span></code>): Worker is recycled after exceeding this (default: 2 GB)</p></li>
<li><p><strong>Hard limit</strong> (<code class="docutils literal notranslate"><span class="pre">ODOO_MEMORY_HARD</span></code>): Worker is killed immediately (default: 2.5 GB)</p></li>
</ul>
</div>
<div class="section" id="request-limits">
<h3>Request Limits<a class="headerlink" href="#request-limits" title="Permalink to this headline">#</a></h3>
<p>Additional limits protect against runaway requests:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ODOO_LIMIT_REQUEST</span></code></p></td>
<td><p>8192</p></td>
<td><p>Max requests per worker before recycling</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ODOO_TIME_CPU</span></code></p></td>
<td><p>600</p></td>
<td><p>Max CPU seconds per request</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ODOO_TIME_REAL</span></code></p></td>
<td><p>1200</p></td>
<td><p>Max wall-clock seconds per request</p></td>
</tr>
</tbody>
</table>
<p>The queue worker runs with <code class="docutils literal notranslate"><span class="pre">ODOO_WORKERS=0</span></code> (single-threaded gevent mode) and <code class="docutils literal notranslate"><span class="pre">ODOO_CRON_THREADS=0</span></code> (cron handled by the main Odoo service).</p>
</div>
</div>
<div class="section" id="verification-checklist">
<h2>Verification Checklist<a class="headerlink" href="#verification-checklist" title="Permalink to this headline">#</a></h2>
<p>After deployment, verify the hardening is in place:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DOMAIN</span><span class="o">=</span><span class="s2">"openspp.example.org"</span>

<span class="c1"># Verify HTTPS redirect</span>
curl<span class="w"> </span>-sI<span class="w"> </span>http://<span class="nv">$DOMAIN</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>location
<span class="c1"># Expected: Location: https://openspp.example.org/</span>

<span class="c1"># Verify security headers</span>
curl<span class="w"> </span>-sI<span class="w"> </span>https://<span class="nv">$DOMAIN</span>/web/login<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-iE<span class="w"> </span><span class="s2">"strict-transport|x-content-type|x-frame|content-security|referrer-policy|permissions-policy|x-xss|^server:"</span>

<span class="c1"># Verify database manager is blocked</span>
curl<span class="w"> </span>-sI<span class="w"> </span>https://<span class="nv">$DOMAIN</span>/web/database<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>location
<span class="c1"># Expected: redirect to /web/login</span>

<span class="c1"># Verify cookie flags</span>
curl<span class="w"> </span>-sI<span class="w"> </span>https://<span class="nv">$DOMAIN</span>/web/login<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>set-cookie
<span class="c1"># Expected: SameSite=Lax; Secure</span>

<span class="c1"># Verify WebSocket endpoint responds</span>
curl<span class="w"> </span>-sI<span class="w"> </span>https://<span class="nv">$DOMAIN</span>/websocket
<span class="c1"># Expected: 200 or 101 (upgrade)</span>

<span class="c1"># Verify server header is overridden</span>
curl<span class="w"> </span>-sI<span class="w"> </span>https://<span class="nv">$DOMAIN</span>/web/login<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span><span class="s2">"^server:"</span>
<span class="c1"># Expected: Server: OpenSPP (not Werkzeug or Python)</span>
</pre></div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">#</a></h2>
<div class="section" id="certificate-not-issued">
<h3>Certificate Not Issued<a class="headerlink" href="#certificate-not-issued" title="Permalink to this headline">#</a></h3>
<p><strong>Symptom:</strong> Browser shows "connection not secure" warning.</p>
<ul class="simple">
<li><p>Check Traefik logs: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">logs</span> <span class="pre">traefik</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">acme</span></code></p></li>
<li><p>Verify DNS: <code class="docutils literal notranslate"><span class="pre">dig</span> <span class="pre">$DOMAIN</span></code> must resolve to your server's IP</p></li>
<li><p>Verify port 80 is reachable from the internet (required for HTTP-01 challenge)</p></li>
<li><p>Check the ACME email is valid and not rate-limited</p></li>
</ul>
</div>
<div class="section" id="bad-gateway">
<h3>502 Bad Gateway<a class="headerlink" href="#bad-gateway" title="Permalink to this headline">#</a></h3>
<p><strong>Symptom:</strong> Traefik returns 502 errors.</p>
<ul class="simple">
<li><p>Check Odoo is running: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">ps</span></code></p></li>
<li><p>Check Odoo health: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">exec</span> <span class="pre">odoo</span> <span class="pre">curl</span> <span class="pre">-f</span> <span class="pre">http://localhost:8069/web/health</span></code></p></li>
<li><p>Check Odoo logs: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">logs</span> <span class="pre">odoo</span></code></p></li>
<li><p>Odoo may still be starting (start period is 120s). Wait and retry.</p></li>
</ul>
</div>
<div class="section" id="websocket-timeout">
<h3>WebSocket Timeout<a class="headerlink" href="#websocket-timeout" title="Permalink to this headline">#</a></h3>
<p><strong>Symptom:</strong> Chat and notifications stop working after a few minutes.</p>
<ul class="simple">
<li><p>Verify the WebSocket router is configured: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">exec</span> <span class="pre">traefik</span> <span class="pre">cat</span> <span class="pre">/etc/traefik/traefik.yml</span></code></p></li>
<li><p>Check that port 8072 is accessible within the Docker network</p></li>
<li><p>Check browser console for WebSocket connection errors</p></li>
</ul>
</div>
<div class="section" id="rate-limit-too-strict">
<h3>Rate Limit Too Strict<a class="headerlink" href="#rate-limit-too-strict" title="Permalink to this headline">#</a></h3>
<p><strong>Symptom:</strong> Users get 429 (Too Many Requests) during normal usage.</p>
<ul class="simple">
<li><p>Increase <code class="docutils literal notranslate"><span class="pre">average</span></code> and <code class="docutils literal notranslate"><span class="pre">burst</span></code> values in the Traefik labels</p></li>
<li><p>Check if users are behind a shared NAT or corporate proxy (many users sharing one IP)</p></li>
<li><p>Consider using Traefik's <code class="docutils literal notranslate"><span class="pre">ipWhitelist</span></code> middleware to exempt trusted internal IPs</p></li>
</ul>
</div>
</div>
<div class="section" id="related-documentation">
<h2>Related Documentation<a class="headerlink" href="#related-documentation" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Security overview: <a class="reference internal" href="../security/"><span class="doc">Security</span></a></p></li>
<li><p>Security scanning: <a class="reference internal" href="../security/scanning.html"><span class="doc">Security Scanning</span></a></p></li>
<li><p>Backup configuration: <a class="reference internal" href="../backup/"><span class="doc">Backup &amp; Recovery</span></a></p></li>
</ul>
</div>
</div>
</div>
</main>
<footer class="footer-article noprint">
<!-- Previous / next buttons -->
<div class="prev-next-area">
<a class="left-prev" href="index.html" id="prev-link" title="previous page">
<i class="fas fa-angle-left"></i>
<div class="prev-next-info">
<p class="prev-next-subtitle">previous</p>
<p class="prev-next-title">Deployment</p>
</div>
</a>
<a class="right-next" href="../security/index.html" id="next-link" title="next page">
<div class="prev-next-info">
<p class="prev-next-subtitle">next</p>
<p class="prev-next-title">Security</p>
</div>
<i class="fas fa-angle-right"></i>
</a>
</div>
</footer>
</div>
</div>
<div class="footer-content row">
<footer class="col footer"><p>
  
    By The OpenSPP community<br/>
  
      © Copyright OpenSPP.<br/>
<div class="extra_footer">
<p>The text and illustrations in this website are licensed by the OpenSPP Project under a Creative Commons Attribution 4.0 International license. All other trademarks are owned by their respective owners.</p>
</div>
</p>
</footer>
</div>
</div>
</div>
</div>
<!-- Scripts loaded after <body> so the DOM is not blocked -->
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<script type="text/javascript">
        $(document).ready(function() {
            // Hide empty sub menu.
            var lists = $("div.toctree-wrapper ul");
            $.each(lists, function(index, list) {
                if($(list).find("li").length == 0) {
                    $(list).prev().hide();
                    $(list).hide();
                }
            });
        })
    </script>
<script src="/_static/version_switcher.js"></script></body>
</html>